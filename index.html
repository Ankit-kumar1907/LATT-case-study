<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Latt Subscription Manager: A case study on ethical UX and backend logic.">
  <title>Latt ‚Äî Technical Case Study</title>

<style>
  /* ========= VARIABLES ========= */
  :root {
    --text-main: #111;
    --text-muted: #666;
    --accent: #004493;
    --bg: #fff;
    --surface: #f8f9fa;
    --border: #e0e0e0;
    --code-bg: #1e1e1e;
    --success: #2E7D32;
    --error: #D32F2F;
    --font-stack: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    --transition: all 0.2s ease;
  }

  /* ========= BASE STYLES ========= */
  * { box-sizing: border-box; margin: 0; padding: 0; }
  html { scroll-behavior: smooth; }
  body {
    font-family: var(--font-stack);
    color: var(--text-main);
    line-height: 1.7;
    background: var(--bg);
  }
  a { text-decoration: none; color: var(--accent); }
  button, input, select { font-family: inherit; }

  /* ========= LAYOUT ========= */
  .layout {
    display: grid;
    grid-template-columns: 240px 1fr;
    max-width: 1100px;
    margin: 0 auto;
    gap: 60px;
    padding: 0 24px;
  }

  /* ========= SIDEBAR ========= */
  .sidebar {
    position: sticky;
    top: 40px;
    height: fit-content;
    padding-top: 60px;
    border-right: 1px solid var(--border);
  }
  .sidebar ul { list-style: none; padding: 0; }
  .sidebar li { margin-bottom: 12px; }
  .sidebar a {
    color: var(--text-muted);
    font-size: 0.9rem;
    font-weight: 500;
    display: block;
    padding: 4px 0;
    transition: var(--transition);
  }
  .sidebar a:hover { color: var(--accent); transform: translateX(4px); }
  .sidebar .back-link {
    margin-bottom: 32px;
    color: var(--text-main);
    font-weight: 700;
    display: block;
  }

  /* ========= MAIN CONTENT ========= */
  main { padding-top: 60px; padding-bottom: 120px; max-width: 720px; }
  h1 { font-size: 2.5rem; letter-spacing: -0.02em; line-height: 1.1; margin-bottom: 24px; }
  h2 {
    font-size: 1.6rem;
    margin-top: 80px;
    margin-bottom: 24px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border);
    color: var(--accent);
  }
  h3 { font-size: 1.2rem; margin-top: 40px; margin-bottom: 16px; }
  p { margin-bottom: 20px; color: var(--text-muted); font-size: 1rem; }

  /* META GRID */
  .meta-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
    margin-bottom: 60px;
    padding-bottom: 40px;
    border-bottom: 1px solid var(--border);
  }
  .meta-item strong {
    display: block;
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-muted);
  }

  /* IMAGES */
  figure {
    margin: 40px 0;
    border: 1px solid var(--border);
    border-radius: 8px;
    overflow: hidden;
    background: var(--surface);
  }
  figure img { width: 100%; display: block; }
  figcaption {
    padding: 12px;
    font-size: 0.85rem;
    color: var(--text-muted);
    text-align: center;
    border-top: 1px solid var(--border);
    background: var(--surface);
  }

  /* INSIGHT BOXES */
  .insight {
    background: #f0f7ff;
    border-left: 4px solid var(--accent);
    padding: 24px;
    margin: 32px 0;
    border-radius: 0 8px 8px 0;
    font-size: 0.95rem;
  }
  .code-concept {
    font-family: 'Courier New', monospace;
    background: var(--surface);
    padding: 24px;
    border-radius: 8px;
    border: 1px solid var(--border);
    font-size: 0.9rem;
    color: #333;
    margin: 24px 0;
  }

  /* PROTOTYPE CONTAINER */
  .prototype-container {
    background: #fff;
    border: 2px solid var(--accent);
    border-radius: 12px;
    padding: 32px;
    margin: 40px 0;
    box-shadow: 0 8px 30px rgba(0,0,0,0.05);
    transition: var(--transition);
  }
  .prototype-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    border-bottom: 1px solid var(--border);
    padding-bottom: 16px;
  }

  /* SUBSCRIPTIONS GRID */
  .subscriptions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 16px;
  }
  .subscription-item {
    background: var(--surface);
    padding: 16px;
    border-radius: 8px;
    border: 1px solid var(--border);
    transition: var(--transition);
  }
  .subscription-item:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
  .subscription-item h3 { margin-bottom: 8px; font-size: 1.1rem; }
  .subscription-item p { color: var(--text-muted); font-size: 0.9rem; margin-bottom: 8px; }
  .subscription-item .category {
    font-size: 0.75rem;
    background: #eee;
    padding: 2px 8px;
    border-radius: 4px;
    display: inline-block;
    margin-bottom: 12px;
  }
  .subscription-item .btn { width: 100%; margin-top: 12px; }

  /* BUTTONS */
  .btn {
    padding: 10px 16px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    font-size: 0.9rem;
    transition: var(--transition);
  }
  .btn-primary { background: var(--accent); color: white; }
  .btn-primary:hover { background: #003377; }
  .btn-fail { background: var(--error); color: white; }
  .btn-fail:hover { background: #b71c1c; }
  .btn-success { background: var(--success); color: white; }
  .btn-success:hover { background: #1b5e20; }
  .btn-sm { font-size: 0.8rem; padding: 6px 12px; }

  /* MODALS */
  .modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(2px);
    animation: fadeIn 0.3s;
  }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  .modal-content {
    background: var(--bg);
    margin: 15% auto;
    padding: 32px;
    border-radius: 12px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.2);
    animation: slideUp 0.3s;
  }
  @keyframes slideUp { from { transform: translateY(20px); } to { transform: translateY(0); } }
  .close {
    float: right;
    font-size: 24px;
    cursor: pointer;
    color: #999;
    transition: var(--transition);
  }
  .close:hover { color: #000; }

  /* FORMS */
  input, select {
    width: 100%;
    padding: 12px;
    margin: 8px 0 16px;
    border: 1px solid var(--border);
    border-radius: 6px;
    font-size: 1rem;
    transition: var(--transition);
  }
  input:focus, select:focus { border-color: var(--accent); outline: none; }
  label { font-size: 0.85rem; color: var(--text-muted); display: block; margin-bottom: 4px; }

  /* DEMO OUTPUT */
  #demo-output {
    margin-top: 24px;
    text-align: left;
    display: none;
    padding: 16px;
    background: var(--surface);
    border-radius: 6px;
    border-left: 4px solid transparent;
  }

  /* EMPTY STATE */
  .empty-state {
    text-align: center;
    padding: 40px;
    color: var(--text-muted);
    grid-column: 1 / -1;
  }
  .empty-state i { font-size: 2rem; margin-bottom: 16px; display: block; }

  /* RESPONSIVE */
  @media (max-width: 850px) {
    .layout { grid-template-columns: 1fr; gap: 0; }
    .sidebar { display: none; }
    .subscriptions-grid { grid-template-columns: 1fr; }
  }
</style>
</head>

<body>

  <!-- MODALS -->
  <div id="auth-modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2 style="margin: 0 0 20px; font-size: 1.5rem; border: none;">Login</h2>
      <form id="auth-form">
        <input type="email" id="email" placeholder="Email" required />
        <input type="password" id="password" placeholder="Password" required />
        <button type="submit" class="btn btn-primary" style="width:100%">Sign In</button>
      </form>
    </div>
  </div>

  <div id="add-sub-modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2 style="margin: 0 0 20px; font-size: 1.5rem; border: none;">New Subscription</h2>
      <form id="add-sub-form">
        <input type="text" id="sub-name" placeholder="Service Name (e.g. Netflix)" list="service-suggestions" required />
        <datalist id="service-suggestions">
          <option value="Netflix">
          <option value="Spotify">
          <option value="Amazon Prime">
          <option value="Disney+ Hotstar">
          <option value="Zomato Pro">
        </datalist>
        <input type="text" id="sub-cost" placeholder="Monthly Cost (‚Çπ)" inputmode="numeric" pattern="[0-9]*" required />
        <label style="font-size: 0.8rem; color: #666;">Renewal Date</label>
        <input type="date" id="sub-renewal" required />
        <select id="sub-category" required>
          <option value="">Select Category</option>
          <option value="Entertainment">Entertainment</option>
          <option value="Utilities">Utilities</option>
          <option value="Fitness">Fitness</option>
          <option value="Food">Food</option>
        </select>
        <button type="submit" class="btn btn-primary" style="width:100%">Add Subscription</button>
      </form>
    </div>
  </div>

  <!-- MAIN LAYOUT -->
  <div class="layout">
    <aside class="sidebar">
      <a href="index.html" class="back-link">‚Üê Back to Home</a>
      <nav>
        <ul>
          <li><a href="#overview">01. Overview</a></li>
          <li><a href="#research">02. Research & Ethics</a></li>
          <li><a href="#prototype">03. Live Prototype</a></li>
          <li><a href="#logic">04. Engineering Logic</a></li>
          <li><a href="#design">05. Interface Design</a></li>
          <li><a href="#failure">06. Failure Analysis</a></li>
          <li><a href="#reflection">07. Reflection</a></li>
        </ul>
      </nav>
      <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee;">
        <p style="font-size: 0.8rem; margin-bottom: 8px;">Admin Access</p>
        <button id="login-btn" class="btn btn-primary" style="width: 100%;">Login to Latt</button>
      </div>
    </aside>

    <main>
      <!-- OVERVIEW -->
      <header id="overview">
        <h1>Latt Subscription Manager</h1>
        <p style="font-size: 1.2rem; color: var(--text-main);">
          Realigning system persistence with user intent through database logic and ethical UI.
        </p>
        <div class="meta-grid">
          <div class="meta-item"><strong>Role</strong>UX Research & Full Stack</div>
          <div class="meta-item"><strong>Timeline</strong>4 Weeks (Solo Project)</div>
          <div class="meta-item"><strong>Core Tech</strong>Node.js, SQL, Vanilla JS</div>
        </div>
        <figure>
          <img src="assets/Hero.png" alt="Latt Dashboard Mockup" onerror="this.style.height='400px'; this.style.background='#f0f0f0'; this.style.display='flex'; this.style.alignItems='center'; this.style.justifyContent='center'; this.textContent='Dashboard Preview'">
          <figcaption>The Central Dashboard: Designed for immediate financial visibility.</figcaption>
        </figure>
      </header>

      <!-- RESEARCH -->
      <section id="research">
        <h2>02. Research & Ethical Framework</h2>
        <p>
          The subscription economy thrives on "invisibility." Once a user subscribes, the system is designed to fade into the background. My goal was to invert this: <strong>How might we make financial commitments visible without being annoying?</strong>
        </p>
        <h3>The "Anxiety Gap" Finding</h3>
        <p>
          I conducted a comparative analysis of 15 subscription management tools. A distinct pattern emerged: trust drops significantly when applications request banking credentials (OAuth/Plaid) before demonstrating value.
        </p>
        <div class="insight">
          <strong>Key Insight:</strong>
          Users treat payment processing not as a technical step, but as a moment of vulnerability. A system that hides logic during this phase increases anxiety.
        </div>
      </section>

      <!-- PROTOTYPE -->
      <section id="prototype">
        <h2>03. Live Prototype</h2>
        <p>I built this functional component to test the "Add Subscription" flow. You can interact with the mock database below to see how the list updates dynamically.</p>
        <div class="prototype-container">
          <div class="prototype-header">
            <h3 style="margin:0;">Active Subscriptions</h3>
            <button id="add-sub-btn" class="btn btn-primary">+ Add New</button>
          </div>
          <div id="subscriptions-list" class="subscriptions-grid">
            <!-- Dynamically populated -->
          </div>
          <div id="empty-state" class="empty-state" style="display: none;">
            <i>üì±</i>
            <p>No subscriptions yet.<br>Add one to track your spending!</p>
          </div>
        </div>
        <div class="insight" style="background: #eef9f0; border-left-color: var(--success);">
          <strong>Engineering Note:</strong> This prototype uses a local Javascript array to simulate the SQL database response. In the production version, this connects to the <code>/api/subscriptions</code> endpoint.
        </div>
      </section>

      <!-- LOGIC -->
      <section id="logic">
        <h2>04. The Engineering Logic</h2>
        <p>As a student of Mathematics, I approached the backend not just as data storage, but as a system of relations.</p>
        <figure>
          <img src="assets/Entity-Relationship.png" alt="SQL Database Schema showing 3NF Normalization" onerror="this.style.height='300px'; this.style.background='#f0f0f0'; this.style.display='flex'; this.style.alignItems='center'; this.style.justifyContent='center'; this.textContent='Database Schema'">
          <figcaption>The 3NF Schema: Separating Users from Services to prevent data redundancy.</figcaption>
        </figure>
        <h3>Database Normalization (3NF)</h3>
        <p>A common failure in junior projects is redundancy‚Äîstoring subscription details directly in the user table. To solve this, I normalized the database to Third Normal Form (3NF).</p>
        <ul style="margin-bottom: 24px; padding-left: 20px; color: var(--text-muted);">
          <li><strong>Users Table:</strong> Authentication & Settings.</li>
          <li><strong>Services Table:</strong> Static data (Netflix, Spotify definitions).</li>
          <li><strong>Subscriptions Table:</strong> The dynamic link (Start date, Renewal cycle).</li>
        </ul>
        <h3>The "Game Loop" Analogy</h3>
        <p>In code, handling recurring payments is similar to handling input in a game loop. When building a racing game, we don't write code for every single time the player presses the horn. Instead, we write a <strong>Callback Function</strong> that listens for the event.</p>
        <div class="code-concept">
          <strong>Conceptual Logic:</strong><br>
          Just as the game listens for <code>onPress(horn)</code>, the Latt backend listens for <code>onDate(renewal)</code>.<br><br>
          Instead of hard-coding dates, the system uses a cron-job (the game loop) to check for <code>renewal_date <= today</code> and triggers the <code>processPayment()</code> callback. This abstraction keeps the code lightweight and scalable.
        </div>
      </section>

      <!-- DESIGN -->
      <section id="design">
        <h2>05. Interface Design</h2>
        <p>With the logic in place, the interface needed to reflect the system's status clearly.</p>
        <h3>Wireframing the "Happy Path"</h3>
        <p>I started with low-fidelity sketches focusing on the hierarchy of information. The priority was <strong>Next Bill Date</strong> and <strong>Cost</strong>.</p>
        <figure>
          <img src="assets/Home-Logged-In.png" alt="Wireframes and Early Sketches" onerror="this.style.height='300px'; this.style.background='#f0f0f0'; this.style.display='flex'; this.style.alignItems='center'; this.style.justifyContent='center'; this.textContent='Wireframe Evolution'">
          <figcaption>Evolution from Low-Fidelity Wireframe to High-Fidelity UI.</figcaption>
        </figure>
      </section>

      <!-- FAILURE -->
      <section id="failure">
        <h2>06. Failure Analysis (Teardown)</h2>
        <p>In HCI, the "Happy Path" (when everything works) is easy. The real challenge is the "Unhappy Path." I treated Payment Failure as a primary interaction state, not an edge case.</p>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin: 32px 0;">
          <div style="background: var(--surface); padding: 20px; border-radius: 8px;">
            <strong>Case 1: Network Error</strong>
            <p style="font-size:0.9rem; margin-top:8px;">
              <span style="color:var(--error);">‚úñ Bad UI:</span> "Something went wrong." (User panics: Did I pay?)<br>
              <span style="color:var(--success);">‚úî Latt UI:</span> Checks idempotency key. Explicitly states: "No charge was made."
            </p>
          </div>
          <div style="background: var(--surface); padding: 20px; border-radius: 8px;">
            <strong>Case 2: Insufficient Funds</strong>
            <p style="font-size:0.9rem; margin-top:8px;">
              <span style="color:var(--error);">‚úñ Bad UI:</span> "Transaction Declined." (Feels judgmental/shameful).<br>
              <span style="color:var(--success);">‚úî Latt UI:</span> "Payment could not be processed. Please check balance." (Neutral).
            </p>
          </div>
        </div>
        <h3>Interactive Failure Demo</h3>
        <p>Click below to experience how the system de-escalates anxiety during a failure.</p>
        <div class="prototype-container" style="text-align: center; border-color: var(--error);">
          <button class="btn btn-fail" onclick="simulateFailure()">Simulate Failure</button>
          <button class="btn btn-success" onclick="simulateSuccess()">Simulate Success</button>
          <div id="demo-output"></div>
        </div>
      </section>

      <!-- REFLECTION -->
      <section id="reflection">
        <h2>07. Reflection & Learnings</h2>
        <p>Building Latt taught me that <strong>UX is dependent on Backend Architecture</strong>. You cannot design a "Transparent" UI if your database is opaque.</p>
        <p>If I were to continue this project, I would implement the Plaid API to move beyond manual entry, but only <em>after</em> the user has manually tracked their first subscription, maintaining the trust-first onboarding flow.</p>
      </section>
    </main>
  </div>

<script>
  // MOCK DATABASE
  let subscriptions = [
    { id: 1, name: "Netflix Premium", cost: 649, renewalDate: "2026-02-15", category: "Entertainment" },
    { id: 2, name: "Spotify", cost: 119, renewalDate: "2026-01-30", category: "Entertainment" },
    { id: 3, name: "AWS Cloud", cost: 1200, renewalDate: "2026-03-01", category: "Utilities" }
  ];

  // DOM ELEMENTS
  const list = document.getElementById("subscriptions-list");
  const emptyState = document.getElementById("empty-state");
  const authModal = document.getElementById("auth-modal");
  const addModal = document.getElementById("add-sub-modal");

  // RENDER LIST
  function render() {
    if (subscriptions.length === 0) {
      list.style.display = "none";
      emptyState.style.display = "block";
    } else {
      list.style.display = "grid";
      emptyState.style.display = "none";
      list.innerHTML = "";
      subscriptions.forEach(sub => {
        list.innerHTML += `
          <div class="subscription-item">
            <h3>${sub.name}</h3>
            <p><strong>‚Çπ${sub.cost}</strong> / month</p>
            <p>Renews: ${formatDate(sub.renewalDate)}</p>
            <span class="category">${sub.category}</span>
            <button class="btn btn-fail btn-sm" onclick="removeSub(${sub.id})">Cancel Plan</button>
          </div>
        `;
      });
    }
  }

  // FORMAT DATE FOR DISPLAY
  function formatDate(dateString) {
    const options = { day: 'numeric', month: 'short', year: 'numeric' };
    return new Date(dateString).toLocaleDateString('en-IN', options);
  }

  // ADD SUB
  document.getElementById("add-sub-form").addEventListener("submit", (e) => {
    e.preventDefault();
    const name = document.getElementById("sub-name").value;
    const cost = document.getElementById("sub-cost").value;
    const date = document.getElementById("sub-renewal").value;
    const cat = document.getElementById("sub-category").value;

    subscriptions.push({
      id: Date.now(),
      name,
      cost: parseInt(cost),
      renewalDate: date,
      category: cat
    });
    render();
    addModal.style.display = "none";
    document.getElementById("add-sub-form").reset();
  });

  // REMOVE SUB
  function removeSub(id) {
    if(confirm("Are you sure you want to cancel this subscription?")) {
      subscriptions = subscriptions.filter(s => s.id !== id);
      render();
    }
  }

  // SIMULATIONS
  function simulateFailure() {
    const out = document.getElementById("demo-output");
    out.style.display = "block";
    out.style.borderLeft = "4px solid var(--error)";
    out.innerHTML = `
      <h4 style="color:var(--error); margin-bottom:8px">‚ö† Payment Failed</h4>
      <p style="margin:0">No money was deducted. We confirmed your account was not charged.</p>
    `;
  }

  function simulateSuccess() {
    const out = document.getElementById("demo-output");
    out.style.display = "block";
    out.style.borderLeft = "4px solid var(--success)";
    out.innerHTML = `
      <h4 style="color:var(--success); margin-bottom:8px">‚úî Payment Successful</h4>
      <p style="margin:0">Your subscription is active until your next billing date.</p>
    `;
  }

  // MODAL TRIGGERS
  document.getElementById("login-btn").onclick = () => authModal.style.display = "block";
  document.getElementById("add-sub-btn").onclick = () => addModal.style.display = "block";

  // CLOSE MODALS
  document.querySelectorAll(".close").forEach(el => {
    el.onclick = function() { this.closest(".modal").style.display = "none"; }
  });
  window.onclick = (e) => {
    if (e.target.classList.contains('modal')) e.target.style.display = "none";
  }

  // INIT
  render();
</script>

</body>
</html>
